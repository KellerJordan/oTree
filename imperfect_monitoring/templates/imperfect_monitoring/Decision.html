{% extends "global/Page.html" %}
{% load staticfiles otree_tags %}

{% block title %}
    Your Choice
{% endblock %}

{% block scripts %}
    <script>
        var oTree = oTree || {};
       (function() {
         oTree.session = "{{ session.code }}";
         oTree.subsession = parseInt("{{ subsession.id }}");
         oTree.subsession = isNaN(oTree.subsession) ? null : oTree.subsession;
         oTree.round = parseInt("{{ player.round_number }}");
         oTree.round = isNaN(oTree.round) ? null : oTree.round;
         oTree.group = parseInt("{{ player.group.id_in_subsession }}");
         oTree.group = isNaN(oTree.group) ? null : oTree.group;
         oTree.role = "{{ player.role }}";
         oTree.participantCode = "{{ player.participant.code }}";
         oTree.appName = "{{ subsession.app_name }}";
         oTree.idInGroup = "{{ player.id_in_group }}";
       })();
     </script>

    <script src="//code.highcharts.com/highcharts.js"></script>

    <link
        rel="import"
        href="{% static "webcomponents/app/imperfect-monitoring/imperfect-monitoring.html" %}">
{% endblock %}

{% block content %}

    <imperfect-monitoring
        row-labels='["Cooperate", "Defect"]'
        payoff-matrix=
        '[
            [
                "{{ Constants.p1_A_p2_A_amount }}",
                "{{ Constants.p2_A_p1_A_amount }}"
            ],
            [
                "{{ Constants.p1_A_p2_B_amount }}",
                "{{ Constants.p2_A_p1_B_amount }}"
            ],
            [
                "{{ Constants.p1_B_p2_A_amount }}",
                "{{ Constants.p2_B_p1_A_amount }}"
            ],
            [
                "{{ Constants.p1_B_p2_B_amount }}",
                "{{ Constants.p2_B_p1_B_amount }}"
            ]
        ]'
        probability-matrix=
        '[
            [
                "{{ Constants.p1_A_p2_A_signal }}",
                "{{ Constants.p2_A_p1_A_signal }}"
            ],
            [
                "{{ Constants.p1_A_p2_B_signal }}",
                "{{ Constants.p2_A_p1_B_signal }}"
            ],
            [
                "{{ Constants.p1_B_p2_A_signal }}",
                "{{ Constants.p2_B_p1_A_signal }}"
            ],
            [
                "{{ Constants.p1_B_p2_B_signal }}",
                "{{ Constants.p2_B_p1_B_signal }}"
            ]
        ]'
        player-index='{{ player.id_in_group|add:"-1"}}'
        period-length='{{ Constants.period_length }}'>
    </imperfect-monitoring>



    {% include 'imperfect_monitoring/Instructions.html' %}

{% endblock %}
